{% extends "base.html" %}

{% block title %}{{ tournament.name }} {{ _('결과 입력') }} - SCUTTA{% endblock %}

{% block container_style %}margin-top: 0;{% endblock %}

{% block header_left %}
<a href="{{ url_for('league.tournament_detail', tournament_id=tournament.id) }}" class="text-xl font-bold truncate">
    {{ tournament.name }}
</a>
{% endblock %}

{% block content %}
<div class="bg-white p-6 rounded-lg shadow-sm max-w-2xl mx-auto">
    <h2 class="text-2xl font-bold mb-6 text-center">{{ _('경기 결과 입력') }}</h2>

    <form action="{{ url_for('league.submit_tournament_results', tournament_id=tournament.id) }}" method="POST"
        class="space-y-6">
        {% for match in matches %}
        {% if not match.winner_id %}
        <div class="border rounded-lg p-4 bg-gray-50">
            <h3 class="text-sm font-bold text-gray-500 mb-2 text-center">{{ _('Match') }} #{{ match.id }}</h3>
            <input type="hidden" name="match_ids[]" value="{{ match.id }}">

            <div class="grid grid-cols-5 gap-2 items-center text-center">
                <div class="col-span-2">
                    <span class="font-bold block truncate">{{ match.p1_name }}</span>
                    <input type="radio" name="winner_{{ match.id }}" value="{{ match.p1_id }}" class="mt-2" required>
                    <label class="text-xs text-gray-500">{{ _('승리') }}</label>
                </div>

                <div class="col-span-1 font-bold text-gray-300">VS</div>

                <div class="col-span-2">
                    <span class="font-bold block truncate">{{ match.p2_name }}</span>
                    <input type="radio" name="winner_{{ match.id }}" value="{{ match.p2_id }}" class="mt-2" required>
                    <label class="text-xs text-gray-500">{{ _('승리') }}</label>
                </div>
            </div>

            <div class="mt-4 flex justify-center gap-4">
                <div>
                    <label class="block text-xs text-center text-gray-500 mb-1">{{ match.p1_name }} {{ _('점수')
                        }}</label>
                    <input type="number" name="score_p1_{{ match.id }}" value="0" min="0"
                        class="w-16 text-center border rounded">
                </div>
                <div>
                    <label class="block text-xs text-center text-gray-500 mb-1">{{ match.p2_name }} {{ _('점수')
                        }}</label>
                    <input type="number" name="score_p2_{{ match.id }}" value="0" min="0"
                        class="w-16 text-center border rounded">
                </div>
            </div>
        </div>
        {% endif %}
        {% endfor %}

        <button type="submit" class="w-full bg-main button py-3 text-lg font-bold">
            {{ _('입력 완료') }}
        </button>
    </form>
</div>
{% endblock %}